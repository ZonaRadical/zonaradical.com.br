.main-content
  -content_for :for_head do
    /* general METAS
    %title Pacotes de Snow | Zona Radical
    %meta{:name => "description", :content =>  "Todos os pacotes de vigem de neve num site so. E aqui. Encontre sua viagem de snowboard prefeita!"}
    %meta{:viewport => "width=1220, maximum-scale=2.0"}
    %meta{:property=>"og:url", :content => request.original_url.to_s}
  .heading
    %h1
      Offers
    - if can? :create, Offer
      = link_to "+ #{t('createOffer')}", new_manage_offer_path, class: 'all add-link'
  %p.search-intro 
    Aqui voce poe encontrar os pacotes de viagens oferecidos pelas agecias turisticas do Brasil.
  - offer_resort_categories.each do |resort_category|
    = resort_category.name
  = form_for :search, url: search_offers_path, method: :get do |f|
    .search-filter
      .select-wrap
        = f.hidden_field :resort_categories, value: search_value_for(:resort_categories)
        .select
          %span.name Destino
          %a.arrow{:href => "#"}
        %ul.option-list
          %li.default{data: {value: ''}} Tanto faz
          - offer_resort_categories.each do |resort_category|
            %li{data: { value: resort_category.id }}= resort_category.name
      .select-wrap
        = f.hidden_field :resorts, value: search_value_for(:resorts)
        .select
          %span.name Estação
          %a.arrow{:href => "#"}
        %ul.option-list
          - offer_resorts.each do |resort|
            %li{data: { value: resort.id } }= resort.name
      .select-wrap
        = f.hidden_field :period, value: search_value_for(:period)
        .select
          %span.name Periodo
          %a.arrow{:href => "#"}
        %ul.option-list
          %li.default{data: {value: ''}} Todos
          - offer_dates.each do |date|
            %li{data: { value: date.strftime("%m/%Y") }}= date.strftime("%B'%y")
      .select-wrap
        = f.hidden_field :offer_style, value: search_value_for(:offer_style)
        .select
          %span.name Alvo
          %a.arrow{:href => "#"}
        %ul.option-list
          %li.default{data: {value: ''}} Tanto faz
          - offer_styles.each do |offer_style|
            %li{data: { value: offer_style.id }}= offer_style.name
      .select-wrap
        = f.hidden_field :accommodation, value: search_value_for(:accommodation)
        .select
          %span.name Hospedagem
          %a.arrow{:href => "#"}
        %ul.option-list
          %li.default{data: {value: ''}} Todos tipos
          - offer_accommodations.each do |accommodation|
            %li{data: { value: accommodation.id }}= accommodation.name
      .select-wrap
        = f.hidden_field :cost, value: search_value_for(:cost)
        .select
          %span.name Custos
          %a.arrow{:href => "#"}
        %ul.option-list
          %li.default{data: {value: ''}} Qq
          %li{"data-value" => "0..99"} menos de r$ 100 por dia
          %li{"data-value" => "100..200"} r$ 100 - r$ 200
          %li{"data-value" => "201..Infinity"} mais de r$ 200 por dia
      .clear
    / end search-filter
    = f.submit t('applyFilters'), :style=>"display: block; margin-left: auto; margin-right: auto;"
    = link_to t('cleanFilters'), main_app.offers_path, class: 'button', :style=>"display: block; margin-left: auto; margin-right: auto;"
  / :style=>"float: right;"
  .heading
    - if action_name == 'search'
      %h1 Pacotes filtrados
    - else
      %h1 Todos os pacotes
    - if can? :manage, Offer
      = link_to 'Os meus pacotes', manage_offers_path, class: 'all my-ads', target: '_blank'
  - if @offers.empty?
    Não existem pacotes ou nenhum foi encontrada com os filtros especificados.
  - else
    = render 'list', offer_path_method: "offer_path"
  .clear

  -content_for :aside do
    %aside
      =render 'shared/aside/aside_social_buttons'
      /=render 'shared/aside/aside_tip_category', :tip_category => nil
      =render 'shared/aside/aside_fb_like_box'
      =render 'shared/aside/aside_advert'
      =render 'shared/aside/aside_resort_gallery'
    .clear